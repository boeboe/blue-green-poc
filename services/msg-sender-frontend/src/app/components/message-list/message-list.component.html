<div class="message-list-container">
  <!-- Buttons at the top -->
  <div class="actions">
    <button class="new-message-btn" (click)="showNewMessageForm()">New</button>
    <button class="delete-all-btn" (click)="deleteAllMessages()">Delete All</button>
    <button (click)="refreshMessages()">Refresh</button>
  </div>

  <!-- Message list -->
  <div *ngIf="messages.length === 0">
    No messages available.
  </div>

  <ul *ngIf="messages.length > 0">
    <li *ngFor="let message of messages" class="message-row" (click)="toggleMessageDetails(message.id)">
      <div class="message-header">
        <strong>{{ message.topic }}</strong>
        <div class="message-actions">
          <button (click)="editMessage(message); $event.stopPropagation()">Edit</button>
          <button (click)="deleteMessage(message.id); $event.stopPropagation()">Delete</button>
        </div>
      </div>

      <!-- Expanded details -->
      <div *ngIf="expandedMessageId === message.id" class="message-details">
        <p><strong>Message:</strong> {{ message.message }}</p>
        <p><strong>Created:</strong> {{ message.dateCreated }}</p>
        <p><strong>Last updated:</strong> {{ message.dateUpdated }}</p>
      </div>
    </li>
  </ul>

  <!-- Buttons at the bottom -->
  <div class="actions">
    <button class="new-message-btn" (click)="showNewMessageForm()">New</button>
    <button class="delete-all-btn" (click)="deleteAllMessages()">Delete All</button>
    <button (click)="refreshMessages()">Refresh</button>
  </div>

  <!-- Modal for creating/editing a message -->
  <div *ngIf="isNewMessageFormVisible" class="modal">
    <div class="modal-content">
      <h2>{{ isEditMode ? 'Edit Message' : 'Create New Message' }}</h2>
      <label for="topic">Topic:</label>
      <input id="topic" [(ngModel)]="newMessageTopic" />
      <label for="message">Message:</label>
      <textarea id="message" [(ngModel)]="newMessageContent"></textarea>
      <div class="modal-actions">
        <button (click)="saveNewMessage()">{{ isEditMode ? 'Save Changes' : 'Save' }}</button>
        <button (click)="closeNewMessageForm()">Cancel</button>
      </div>
    </div>
  </div>
</div>